(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{192:function(t,a,s){"use strict";s.r(a);var n=s(0),c=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"_1-web-容器的互操作接口概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-web-容器的互操作接口概述","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. WEB 容器的互操作接口概述")]),t._v(" "),s("h2",{attrs:{id:"_1-1-类库引用说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-类库引用说明","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.1 类库引用说明")]),t._v(" "),s("h3",{attrs:{id:"_1-1-1-引入方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-引入方式","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.1.1 引入方式")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("script type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"text/javascript"')]),t._v(" src"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"/js/bcl.min.js"')]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("h3",{attrs:{id:"_1-1-2-实例化类库对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-实例化类库对象","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.1.2 实例化类库对象")]),t._v(" "),s("p",[t._v("Bcl 对象为类与区块链交互入口，bcl 对象实例化调用方式如下:")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _configParams"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        api_node"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token comment"}},[t._v("//api 节点")]),t._v("\n          url"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("”ws"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),s("span",{attrs:{class:"token constant"}},[t._v("XXXXXXXXX")]),t._v("”"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token comment"}},[t._v("//节点 websocket 地址")]),t._v("\n          name"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("”"),s("span",{attrs:{class:"token constant"}},[t._v("XXXX")]),t._v("”"),s("span",{attrs:{class:"token comment"}},[t._v("//节点名称")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        faucet_url"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token string"}},[t._v('"http://***.***.***.***:****"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("//注册入口")]),t._v("\n        chainID"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("”xxxxx”  "),s("span",{attrs:{class:"token operator"}},[t._v("/")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" 链 "),s("span",{attrs:{class:"token constant"}},[t._v("ID")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bcl"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("BlockChainLib")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_configParams"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" _configParams 为可选参数"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("已默认链接节点服务器。\n")])])]),s("h2",{attrs:{id:"_1-2-初始化类环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-初始化类环境","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.2 初始化类环境")]),t._v(" "),s("p",[t._v("bcl 对象实例化完成后调用 init 方法，进行环境初始化。调用方式如下:")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" options"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    autoReconnect"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("ture"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token comment"}},[t._v("//非必填，当RPC断开时是否自动连接，默认为true")]),t._v("\n\n    callback"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token comment"}},[t._v("//非必填，bcl初始化成功后(即与链成功建立连接后)将调用callback回调函数")]),t._v("\n\n    subscribeToRpcConnectionStatusCallback"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token comment"}},[t._v("//非必填，监听RPC连接状态，status: closed：rpc连接关闭,error：rpc连接错误，realopen：rpc连接成功")]),t._v("\n\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nbcl"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("init")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"_1-3-api-参数统一说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-api-参数统一说明","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.3 API 参数统一说明")]),t._v(" "),s("p",[t._v("1 "),s("strong",[t._v("callback:")])]),t._v(" "),s("p",[t._v("result 为 Object 对象,结构为{status:0,statusText:””},")]),t._v(" "),s("p",[t._v("status=1 的时候表示注册成功，无 statusText 状态描述,")]),t._v(" "),s("p",[t._v("status!=1 时, 意味执行失败，statusText 为失败状态描述，")]),t._v(" "),s("p",[t._v("2 "),s("strong",[t._v("所有 API 不做特殊说明均只有一个参数，这个参数为一个对象，对象包含了所有相关参数，其中也包含 callback")])]),t._v(" "),s("p",[t._v("调用示例:")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" options"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    callback"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nbcl"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getPrivateKey")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("3 API 中的参数类型不做特殊说明均为字符串")]),t._v(" "),s("p",[t._v("4 API 的参数不做特殊说明均不能为空，callback 可选参数")]),t._v(" "),s("p",[t._v("5 查询类 API 的 callback 返回数据实例:{status:1,data:[]}")]),t._v(" "),s("p",[t._v("6 非查询类 API 的 callback 返回数据会多一个数据字段 trxData,值为一个对象")]),t._v(" "),s("p",[t._v("示例")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\nblock_num"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token number"}},[t._v("112260")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token comment"}},[t._v("//区块高度")]),t._v("\n\ntrx_id"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token string"}},[t._v('"#c34021555e01e846ade1e119e2060a60eb514309@112260"')]),s("span",{attrs:{class:"token comment"}},[t._v("//交易 ID")]),t._v("\n\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("7 非查询类 API 如果涉及到关联 ID 业务(如创建道具产生道具 ID)的 callback 返回数据中将包含 data 对象")]),t._v(" "),s("p",[t._v("示例")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("data"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\nresult_id"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token string"}},[t._v('"3.2.798"')]),t._v("\n\nresult_ids"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token string"}},[t._v('"3.2.798"')]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("demo 上的 API 调用返回数据在控制台会有打印")])])}],!1,null,null,null);a.default=c.exports}}]);